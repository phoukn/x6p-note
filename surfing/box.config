#!/system/bin/sh

bin_name="clash"

redir_port="7891"
tproxy_port="1536"
clash_dns_port="1053"
clash_dns_listen="0.0.0.0:${clash_dns_port}"
mihomo_dns_forward="true"
fake_ip_range_v4="172.20.0.1/16"
tun_device="Meta"

# 关闭 false / 开启 true

# -------------------------
# 是否启用定时重启以释放内存资源
# 不会影响游戏网络(无感)过程
interval_enabled="true"

# 单位：s（秒）/m（分钟）/h（小时）/d（天）

clean_interval="12h" # 默认12h
# -------------------------

box_user_group="root:net_admin"

bin_name_list=("sing-box" "clash" "xray" "v2ray" "hysteria")
box_path="/data/adb/box_bll"
bin_path="${box_path}/bin/${bin_name}"
run_path="${box_path}/run"
pid_file="${run_path}/${bin_name}.pid"

intranet=(0.0.0.0/8 10.0.0.0/8 100.0.0.0/8 127.0.0.0/8 169.254.0.0/16 192.0.0.0/24 192.0.2.0/24 192.88.99.0/24 192.168.0.0/16 198.51.100.0/24 203.0.113.0/24 224.0.0.0/4 240.0.0.0/4 255.255.255.255/32)
intranet6=(::/128 ::1/128 ::ffff:0:0/96 100::/64 64:ff9b::/96 2001::/32 2001:10::/28 2001:20::/28 2001:db8::/32 2002::/16 240e::/16 2408::/16 2409::/16 fe80::/10 ff00::/8)

ipv6="enable"
# disable “关闭” # enable  “开启”

proxy_method="TPROXY"
# REDIRECT: TCP only / TPROXY: TCP + UDP / MIXED: REDIRECT TCP + TUN UDP

proxy_mode="whitelist"
# blacklist / whitelist / core

user_packages_list=("0:balti.xposed.pixelifygooglephotos" "0:com.google.android.youtube" "0:com.android.adservices.api" "0:com.android.dynsystem" "0:org.telegram.messenger" "0:com.tsng.hidemyapplist" "0:com.android.federatedcompute.services" "0:com.lonelycatgames.Xplore" "0:com.keerby.formatfactory" "0:com.zima.mobileobservatorypro" "0:com.google.android.configupdater" "0:com.google.ar.core" "0:com.android.vending" "0:com.android.pacprocessor" "0:com.android.networkstack" "0:com.viewblocker.jrsen" "0:com.google.android.marvin.talkback" "0:it.Ettore.calcolielettrici" "0:com.qualcomm.wfd.service" "0:com.flyersoft.moonreaderp" "0:com.accordion.analogcam" "0:org.mozilla.fennec_fdroid" "0:com.microsoft.office.onenote" "0:com.android.statementservice" "0:com.microsoft.emmx" "0:com.mfcloudcalculate.networkdisk" "0:com.omarea.vtools" "0:ru.tech.imageresizershrinker" "0:advanced.scientific.calculator.calc991.plus" "0:net.xnano.android.photoexifeditor" "0:com.android.rkpdapp" "0:world.letsgo.booster.android.pro" "0:com.google.android.gms" "0:com.google.android.gsf" "0:android.ext.services" "0:com.shirobakama.wpchanger" "0:com.android.carrierdefaultapp" "0:com.android.proxyhandler" "0:io.github.muntashirakon.AppManager" "0:com.google.android.printservice.recommendation" "0:com.google.android.apps.photos" "0:com.android.managedprovisioning" "0:com.x8bit.bitwarden" "0:com.google.android.accessibility.switchaccess" "0:com.hp.primecalculator" "0:eu.duong.picturemanager" "0:me.neko.fckvip" "0:com.iudesk.android.photo.editor" "0:com.qualcomm.qti.cne" "0:com.termux" "0:com.google.android.projection.gearhead" "0:com.qualcomm.location" "0:com.protopop.meadowfell" "0:com.positron_it.zlib" "0:com.noctuasoftware.stellarium_plus" "0:com.fido.uafclient" "0:com.android.shell" "0:com.android.sdksandbox" "0:com.android.hotspot2.osulogin" "0:com.adobe.lrmobile" "0:com.qti.qcc" "0:com.android.ondevicepersonalization.services" "0:com.android.captiveportallogin" "0:com.android.devicelockcontroller" "0:com.fimo.camera" "0:me.weishu.kernelsu" "0:com.microsoft.office.outlook" "0:ai.x.grok" "0:org.telegram.auxiliary" "0:com.instander.android" "0:com.artemchep.keyguard" "0:com.fido.asm" "0:com.fido.fido2client" "0:com.android.keychain" "0:com.aurora.store" "0:tornaco.apps.shortx" "0:com.zhiliaoapp.musically" "0:pan.alexander.tordnscrypt" "0:com.twitter.android" "0:com.android.providers.downloads" "0:com.android.providers.downloads.ui" "0:com.farlightgames.igame.gp" "0:io.element.android.x" "0:idm.internet.download.manager.plus" "0:org.thunderdog.challegram" "org.telegram.messenger.web" "0:com.miHoYo.Yuanshen50ps")
# 示：Android用户:包名称 
# 用户空间0 分身999，TUN也需排除包名
# 黑白名单 config.yaml DNS模块 仅允许 redir-host 模式
# 例如：user_packages_list=("0:com.android.captiveportallogin" "10:com.tencent.mm")

gid_list=()
# 根据proxy_mode配置绕过或者代理，可以通过busybox setuidgid命令任意指定

ap_list=("wlan+" "ap+" "rndis+" "ncm+" "eth+" "p2p+")
ignore_out_list=()

# -------------------------
# 是否根据网络状态控制模块服务？
# false “默认禁用” # true “启用”
enable_network_service_control=false # 总开关

# 断开WiFi网络后是否启用模块服务
use_module_on_wifi_disconnect=true

# WiFi网络下是否启用模块服务
use_module_on_wifi=true

# 是否启用WiFi SSID匹配 # 需要匹配的WiFi SSID
use_ssid_matching=false

# WiFi SSID匹配 黑/白名单模式
use_wifi_list_mode="blacklist" # blacklist 黑名单 #whitelist 白名单

# 黑名单列表（多个 SSID 用空格分隔）
blacklist_wifi_ssids="BadWiFi1 BadWiFi2"

# 白名单列表（多个 SSID 用空格分隔）
whitelist_wifi_ssids="GoodWiFi1 GoodWiFi2"
# -------------------------